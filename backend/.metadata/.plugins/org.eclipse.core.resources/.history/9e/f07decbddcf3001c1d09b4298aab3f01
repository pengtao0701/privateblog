package com.privateblog.config;

import java.util.Arrays;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebMvcConfig implements WebMvcConfigurer {

	// 注入 token 拦截器
	@Autowired
	private TokenInterceptor interceptor;

	/**
	 * 重写添加拦截器
	 */
	@Override
	public void addInterceptors(InterceptorRegistry registry) {
		 //白名单地址 注意：不要添加server.servlet.servcontext-path:的目录
        List<String> excludeUrl = Arrays.asList("/user/**",  "/swagger-resources/**", "/swagger-ui.html");
		// 添加自定义拦截器，并拦截对应 url"
		registry.addInterceptor(interceptor).addPathPatterns("/**").excludePathPatterns(excludeUrl);
	}
}